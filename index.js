//======================= Ù„Ø§ ØªÙ„Ø¹Ø¨ Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø¹Ù„Ø´Ø§Ù† Ø§Ù„Ø¨ÙˆØª Ù…ÙŠØ®Ø±Ø¨Ø´ =====================
//======================= Ù„Ø§ ØªÙ„Ø¹Ø¨ Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø¹Ù„Ø´Ø§Ù† Ø§Ù„Ø¨ÙˆØª Ù…ÙŠØ®Ø±Ø¨Ø´ =====================
(function(_0x304653,_0xec63ae){const _0x21d341=_0x4f71,_0x4b8e18=_0x304653();while(!![]){try{const _0xfd39cc=parseInt(_0x21d341(0x18f))/0x1+-parseInt(_0x21d341(0x17c))/0x2+parseInt(_0x21d341(0x1a8))/0x3+-parseInt(_0x21d341(0x1a6))/0x4+parseInt(_0x21d341(0x18b))/0x5*(-parseInt(_0x21d341(0x195))/0x6)+-parseInt(_0x21d341(0x198))/0x7+parseInt(_0x21d341(0x180))/0x8;if(_0xfd39cc===_0xec63ae)break;else _0x4b8e18['push'](_0x4b8e18['shift']());}catch(_0x1dffda){_0x4b8e18['push'](_0x4b8e18['shift']());}}}(_0xa6c0,0x54053));function _0x4f71(_0x2d5d12,_0x8dccf0){const _0xa6c0ea=_0xa6c0();return _0x4f71=function(_0x4f71a8,_0x46d82a){_0x4f71a8=_0x4f71a8-0x176;let _0x56936f=_0xa6c0ea[_0x4f71a8];return _0x56936f;},_0x4f71(_0x2d5d12,_0x8dccf0);}const _0x125fce=_0x3ed8;(function(_0x41f494,_0x4644de){const _0xac0e4d=_0x4f71,_0x1fcae3=_0x3ed8,_0x450248=_0x41f494();while(!![]){try{const _0x2cb981=-parseInt(_0x1fcae3(0xda))/0x1+parseInt(_0x1fcae3(0xd9))/0x2*(parseInt(_0x1fcae3(0xbb))/0x3)+-parseInt(_0x1fcae3(0xe1))/0x4+-parseInt(_0x1fcae3(0xd2))/0x5*(-parseInt(_0x1fcae3(0xbe))/0x6)+-parseInt(_0x1fcae3(0xea))/0x7+parseInt(_0x1fcae3(0xd3))/0x8*(parseInt(_0x1fcae3(0xe8))/0x9)+-parseInt(_0x1fcae3(0xe0))/0xa*(-parseInt(_0x1fcae3(0xbc))/0xb);if(_0x2cb981===_0x4644de)break;else _0x450248['push'](_0x450248[_0xac0e4d(0x189)]());}catch(_0x223875){_0x450248['push'](_0x450248[_0xac0e4d(0x189)]());}}}(_0x504e,0x7ca24));const _0x44fd79=_0x4344;(function(_0x3f023d,_0x5d95a7){const _0xa1ecf=_0x3ed8,_0x5c410c=_0x4344,_0x406f6e=_0x3f023d();while(!![]){try{const _0x35b8b2=-parseInt(_0x5c410c(0xfd))/0x1+-parseInt(_0x5c410c(0xf9))/0x2+parseInt(_0x5c410c(0x107))/0x3*(parseInt(_0x5c410c(0x10f))/0x4)+-parseInt(_0x5c410c(0xf5))/0x5+parseInt(_0x5c410c(0x10e))/0x6*(parseInt(_0x5c410c(0xe8))/0x7)+parseInt(_0x5c410c(0x10c))/0x8*(parseInt(_0x5c410c(0xf3))/0x9)+-parseInt(_0x5c410c(0xf1))/0xa*(-parseInt(_0x5c410c(0x102))/0xb);if(_0x35b8b2===_0x5d95a7)break;else _0x406f6e[_0xa1ecf(0xd5)](_0x406f6e[_0xa1ecf(0xc1)]());}catch(_0x192344){_0x406f6e[_0xa1ecf(0xd5)](_0x406f6e[_0xa1ecf(0xc1)]());}}}(_0x5f22,0x9559e));function _0x4010(_0x1eedab,_0x1a1c56){const _0x1885b4=_0x7f03();return _0x4010=function(_0x8ec308,_0x59f8b1){_0x8ec308=_0x8ec308-0x88;let _0x21092a=_0x1885b4[_0x8ec308];return _0x21092a;},_0x4010(_0x1eedab,_0x1a1c56);}function _0x7f03(){const _0x426ba1=_0x4f71,_0x4b658a=_0x3ed8,_0x3f277b=_0x4344,_0xd74e2b=[_0x3f277b(0x111),_0x4b658a(0xe5),'discord-probot-transfer',_0x3f277b(0x109),_0x3f277b(0x112),_0x4b658a(0xd1),_0x3f277b(0xfa),_0x3f277b(0x10d),_0x3f277b(0x110),_0x426ba1(0x183),_0x3f277b(0xec),_0x3f277b(0xed),'slash',_0x3f277b(0xee),_0x3f277b(0xfb),_0x3f277b(0xfe),_0x3f277b(0x104),_0x3f277b(0xf8),_0x3f277b(0xea),_0x4b658a(0xe4),_0x3f277b(0xf6),_0x3f277b(0xf7),_0x4b658a(0xc0),_0x3f277b(0xff),_0x3f277b(0x100),_0x3f277b(0x106),_0x3f277b(0x105),_0x3f277b(0xfc),_0x3f277b(0xf0),_0x3f277b(0x10b),_0x3f277b(0x103),_0x3f277b(0x108),_0x4b658a(0xd0)];return _0x7f03=function(){return _0xd74e2b;},_0x7f03();}function _0xa6c0(){const _0x40d9e6=['23757PMlopH','6802926DcWqVB','put','uncaughtException','slashCommands','Successfully\x20registered\x20application\x20commands.','86690SBqoWi','1548770poNTci','applicationCommands','296SEOXBs','2617220vsgEEc','1170951FhXQDe','1566486qMAUqn','3iLXpgW','4phVHKV','5442470hlDTnv','319jkJfUS','commands','uncaughtExceptionMonitor','map','9WUEvEK','787832zYNBve','exports','push','1169726oziKvf','9322952gBLyTo','unhandledRejection','events','setToken','log','765690EGogxa','discord-api-types/v9','6kdZcOR','524142gxPfLs','shift','1233588pCDJLP','65AIgVNz','env','./json/config.json','508HNHBbq','154211mrAmOj','1794874ukIWQb','clientID','./handlers/','11888eOVMaW','145602deRuYt','175860TnuYqC','@discordjs/builders','140742ITsKfm','478408dWxicY','1332NBfdCB','colors','then'];_0xa6c0=function(){return _0x40d9e6;};return _0xa6c0();}const _0x2832a9=_0x4010;function _0x3ed8(_0x75376b,_0x13dc16){const _0xe6ec9e=_0x504e();return _0x3ed8=function(_0x1fc97b,_0x46617b){_0x1fc97b=_0x1fc97b-0xb9;let _0x4e6c1c=_0xe6ec9e[_0x1fc97b];return _0x4e6c1c;},_0x3ed8(_0x75376b,_0x13dc16);}(function(_0x10c579,_0x36e245){const _0x4bfe46=_0x4344,_0x2ab35a=_0x4010,_0x31a243=_0x10c579();while(!![]){try{const _0x4fb79f=parseInt(_0x2ab35a(0x9d))/0x1+-parseInt(_0x2ab35a(0xa4))/0x2*(-parseInt(_0x2ab35a(0xa3))/0x3)+-parseInt(_0x2ab35a(0x89))/0x4*(-parseInt(_0x2ab35a(0x9e))/0x5)+-parseInt(_0x2ab35a(0xa5))/0x6+parseInt(_0x2ab35a(0x95))/0x7*(parseInt(_0x2ab35a(0x93))/0x8)+parseInt(_0x2ab35a(0x8f))/0x9*(-parseInt(_0x2ab35a(0x8d))/0xa)+parseInt(_0x2ab35a(0xa2))/0xb;if(_0x4fb79f===_0x36e245)break;else _0x31a243[_0x4bfe46(0x101)](_0x31a243['shift']());}catch(_0x30d7af){_0x31a243[_0x4bfe46(0x101)](_0x31a243[_0x4bfe46(0xf4)]());}}}(_0x7f03,0x8d3f0));const {Client,Collection}=require(_0x44fd79(0xf2)),config=require(_0x2832a9(0x97)),{REST}=require(_0x2832a9(0xa1)),{Routes}=require(_0x2832a9(0x9c)),{SlashCommandBuilder,EmbedBuilder}=require(_0x2832a9(0x90)),colors=require(_0x2832a9(0x9b)),{tax}=require(_0x2832a9(0x8a)),client=new Client({'intents':0x1ffff});process['on'](_0x44fd79(0xeb),_0x451e94=>{const _0x346abb=_0x2832a9;console[_0x346abb(0x98)](_0x451e94);}),process['on'](_0x2832a9(0xa6),_0x16b38f=>{const _0x5efdbe=_0x2832a9;console[_0x5efdbe(0x98)](_0x16b38f);}),process['on'](_0x2832a9(0x8b),_0x5b342b=>{const _0x1a2092=_0x44fd79;console[_0x1a2092(0x104)](_0x5b342b);}),module[_0x44fd79(0x10a)]=client,client[_0x2832a9(0x9f)]=new Collection(),client[_0x44fd79(0x111)]=new Collection(),client[_0x44fd79(0x108)]=new Collection(),[_0x2832a9(0x9f),_0x2832a9(0x88),_0x2832a9(0x94)][_0x2832a9(0x96)](_0x15e2bd=>{const _0x5d6eb6=_0x2832a9;require(_0x5d6eb6(0x99)+_0x15e2bd)(client);});function _0x4344(_0x50a595,_0x29894e){const _0xb35477=_0x5f22();return _0x4344=function(_0x3cc0b1,_0x3c93cd){_0x3cc0b1=_0x3cc0b1-0xe8;let _0x5af686=_0xb35477[_0x3cc0b1];return _0x5af686;},_0x4344(_0x50a595,_0x29894e);}function _0x504e(){const _0x20170a=_0x4f71,_0x4ff971=[_0x20170a(0x19d),_0x20170a(0x1a4),_0x20170a(0x182),_0x20170a(0x190),_0x20170a(0x185),_0x20170a(0x17d),'token','7027132iyEsfk',_0x20170a(0x1a7),_0x20170a(0x193),_0x20170a(0x1a3),_0x20170a(0x18a),'error','1281Tiuzzf',_0x20170a(0x19a),_0x20170a(0x1aa),_0x20170a(0x191),_0x20170a(0x192),_0x20170a(0x194),_0x20170a(0x1a1),'5885544sNRmVM',_0x20170a(0x19f),'45898nAUjYl',_0x20170a(0x18e),_0x20170a(0x17b),_0x20170a(0x1a9),'22TsebHU',_0x20170a(0x196),_0x20170a(0x199),_0x20170a(0x178),'3737435fXiWIc','shift',_0x20170a(0x1a2),_0x20170a(0x19b),_0x20170a(0x176),_0x20170a(0x188),'@discordjs/rest','88wpjGwO',_0x20170a(0x19c),'discord.js',_0x20170a(0x181),_0x20170a(0x184),'22gjcAyp',_0x20170a(0x197),_0x20170a(0x186),_0x20170a(0x18c),_0x20170a(0x17a),'3637820PqtMKz','13955feEoXl',_0x20170a(0x1a5),'catch',_0x20170a(0x17e)];return _0x504e=function(){return _0x4ff971;},_0x504e();}const commands=client[_0x2832a9(0xa7)][_0x2832a9(0xa8)](({execute:_0x30ed53,..._0x23c1f4})=>_0x23c1f4),rest=new REST({'version':'10'})[_0x2832a9(0x91)](config[_0x2832a9(0x92)]||process[_0x125fce(0xcf)][_0x2832a9(0x92)]);function _0x5f22(){const _0x5873a2=_0x4f71,_0x316318=_0x125fce,_0x38624b=[_0x316318(0xdd),_0x5873a2(0x19e),_0x316318(0xc3),_0x316318(0xca),_0x316318(0xdc),_0x316318(0xdf),_0x316318(0xe3),_0x316318(0xd4),_0x316318(0xcc),_0x316318(0xc2),_0x316318(0xc9),_0x316318(0xc5),_0x316318(0xc1),'2670260sxRlEu',_0x316318(0xce),_0x316318(0xec),_0x316318(0xe7),_0x5873a2(0x17f),_0x316318(0xe6),'forEach',_0x316318(0xcd),_0x316318(0xde),_0x5873a2(0x18d),_0x316318(0xbf),_0x316318(0xe2),_0x316318(0xd5),_0x5873a2(0x177),_0x316318(0xeb),_0x316318(0xcb),_0x316318(0xc4),_0x316318(0xc6),_0x316318(0xc8),_0x5873a2(0x1a0),_0x5873a2(0x179),_0x316318(0xdb),_0x316318(0xd6),_0x316318(0xc7),_0x316318(0xba),_0x5873a2(0x187),_0x316318(0xb9),_0x316318(0xbd),_0x316318(0xd8),_0x316318(0xd7)];return _0x5f22=function(){return _0x38624b;},_0x5f22();}rest[_0x44fd79(0xe9)](Routes[_0x2832a9(0x8c)](config[_0x2832a9(0x8e)]),{'body':commands})[_0x2832a9(0x9a)](()=>console[_0x2832a9(0x98)](_0x125fce(0xe9)))[_0x44fd79(0xef)](console[_0x2832a9(0xa0)]);

//============================= MESSAGE WHEN MENTION BOT =======================//
client.on("messageCreate", (message) => {
  if (message.content == `<@${client.user.id}>`) {
    message.reply(`hi I am \`${client.user.tag}\` My prefix is \`/\``);
  }
});
//============================= MESSAGE WHEN MENTION BOT =======================//

//================================== WELCOME ==================================//
const { Database } = require("st.db");
const wlcmdb = new Database("./json/welcome.json");
client.on("guildMemberAdd", async (member) => {
  const wlcmchannelid = await wlcmdb.get("wlcm_channel");
  const wlcmembed = new EmbedBuilder()
    .setTitle(
      `**${member.user.username} Welcome to server \`${member.guild.name}\`**`
    )
    .setDescription(
      `
                        ### > ðŸªª Member ID : \`${member.id}\`
                        ### > ðŸ‘¤ Member Username : \`${member.user.username}\`
                        ### > âœ¨ MemberCount : \`${member.guild.memberCount}\`
                        ### > Don't forget to read rules ðŸ’—
                        ## Enjoy ðŸŒ¹
                        `
    )
    .setThumbnail(member.user.displayAvatarURL())
    .setImage(wlcmdb.get("wlcm_img"));

  const channel = member.guild.channels.cache.get(wlcmchannelid);
  await channel.send({ content: `<@${member.id}>`, embeds: [wlcmembed] });
  await channel.send(wlcmdb.get("wlcm_line"));
});

//================================== WELCOME ==================================//

//================================= ORDER SYSTEM ==============================//
client.on("messageCreate", async (message) => {
  const orderdb = new Database("./json/order.json");
  const order_channel_id = orderdb.get("send_order_room");

  if (message.channelId == order_channel_id) {
    if (message.author.bot) return;
    const ordermsg = message.content;

    // =================== Create Initial Order Embed ===================== //
    const orderembed = new EmbedBuilder().setTitle(
      `**ðŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù‚Ø¨Ù„ ${message.author.tag}**`
    ).setDescription(`
        ## **Ø§Ù„Ø·Ù„Ø¨** : ${ordermsg}
        ### Ù…Ø§Ù‡Ùˆ Ù†ÙˆØ¹ Ø·Ù„Ø¨Ùƒ ØŸ
        \`\`\` Ù‚Ù… Ø¨Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø±ÙŠØ§ÙƒØª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ \`\`\`
        ðŸŽ¨ ØªØµØ§Ù…ÙŠÙ…
        ðŸ¤– Ø¨Ø±Ù…Ø¬ÙŠØ§Øª
        ðŸ“¦ Ù…Ù†ØªØ¬Ø§Øª
      `);

    // Send the initial order embed
    message.delete();
    message.channel
      .send({ content: `<@${message.author.id}>`, embeds: [orderembed] })
      .then(async (msg) => {
        await msg.react("ðŸŽ¨");
        await msg.react("ðŸ¤–");
        await msg.react("ðŸ“¦");
      });

    lastMessage = message;
  }
});

//================================= ORDER SYSTEM ==============================//

//================================== REACTION ORDER SYSTEM ===========================//

// =================== reaction System ===================== //
client.on("messageReactionAdd", async (reaction, user) => {
  const orderdb = new Database("./json/order.json");
  // Ignore bot reactions and only consider the reactions to the message sent by the bot
  if (user.bot || !reaction.message.guild) return;
  if (reaction.message.channelId !== orderdb.get("send_order_room")) return;

  const message = lastMessage;

  // Create individual embeds based on the reaction
  if (reaction.emoji.name === "ðŸŽ¨") {
    // design ORDER
    setTimeout(() => {
      reaction.message.delete();
    }, 500);
    const or_desi = await reaction.message.channel.send(
      `**âœ… <@${message.author.id}> ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­**`
    );
    setTimeout(() => {
      or_desi.delete();
    }, 500);
    const design_room = client.channels.cache.get(
      orderdb.get("design_orders_room")
    );
    const design_or_embed = new EmbedBuilder().setTitle(
      `**ðŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù‚Ø¨Ù„ ${message.author.tag}**`
    ).setDescription(`
            ## **Ø§Ù„Ø·Ù„Ø¨** : 
            ## \`\`\`${lastMessage}\`\`\`
            ØªÙˆØ§ØµÙ„ Ù…Ø¹ <@${message.author.id}>
          `);
    design_room.send({
      content: `<@&${orderdb.get("order_role")}>`,
      embeds: [design_or_embed],
    });
  } else if (reaction.emoji.name === "ðŸ¤–") {
    // programming ORDER
    setTimeout(() => {
      reaction.message.delete();
    }, 500);
    const or_prog = await reaction.message.channel.send(
      `**âœ… <@${message.author.id}> ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­**`
    );
    setTimeout(() => {
      or_prog.delete();
    }, 500);
    const prog_room = client.channels.cache.get(
      orderdb.get("prog_orders_room")
    );
    const prog_or_embed = new EmbedBuilder().setTitle(
      `**ðŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù‚Ø¨Ù„ ${message.author.tag}**`
    ).setDescription(`
            ## **Ø§Ù„Ø·Ù„Ø¨** : 
            ## \`\`\`${lastMessage}\`\`\`
            ØªÙˆØ§ØµÙ„ Ù…Ø¹ <@${message.author.id}>
          `);
    prog_room.send({
      content: `<@&${orderdb.get("order_role")}>`,
      embeds: [prog_or_embed],
    });
  } else if (reaction.emoji.name === "ðŸ“¦") {
    // reaction.message.delete();
    // PRODUCTS ORDER
    setTimeout(() => {
      reaction.message.delete();
    }, 500);
    const or_pro = await reaction.message.channel.send(
      `**âœ… <@${message.author.id}> ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­**`
    );
    setTimeout(() => {
      or_pro.delete();
    }, 500);
    const product_room = client.channels.cache.get(
      orderdb.get("product_orders_room")
    );
    const product_or_embed = new EmbedBuilder().setTitle(
      `**ðŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù‚Ø¨Ù„ ${message.author.tag}**`
    ).setDescription(`
            ## **Ø§Ù„Ø·Ù„Ø¨** : 
            ## \`\`\`${lastMessage}\`\`\`
            ØªÙˆØ§ØµÙ„ Ù…Ø¹ <@${message.author.id}>
          `);
    product_room.send({
      content: `<@&${orderdb.get("order_role")}>`,
      embeds: [product_or_embed],
    });
  }
});

//================================== REACTION ORDER SYSTEM ===========================//


//================================= ðŸ’» ØªØ³ØªØ·ÙŠØ¹ ÙˆØ¶Ø¹ Ø§ÙŠ ÙƒÙˆØ¯ ØªØ±ÙŠØ¯Ù‡ Ù‡Ù†Ø§ ================================//
//========================================= Ø§Ù„Ø§ØµØ¯Ø§Ø± : 14 =========================================//










//================================= ØªØ³ØªØ·ÙŠØ¹ ÙˆØ¶Ø¹ Ø§ÙŠ ÙƒÙˆØ¯ ØªØ±ÙŠØ¯Ù‡ Ù‡Ù†Ø§ ===================================//

//================================== Auto Kill / Client Login ==================================//
setTimeout(() => {
  if (!client || !client.user) {
    console.log("Client Not Login, Process Kill");
    process.kill(1);
  } else {
    console.log("Client Login");
  }
}, 3 * 1000 * 60);

setTimeout(() => {
  process.kill(1);
  console.log("Client Login");
}, 22 * 10000 * 60);

client.login(config.token || process.env.token).catch((err) => {
  console.log(err.message);
});
//================================== Auto Kill / Client Login ==================================//